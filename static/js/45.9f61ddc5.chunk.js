(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[45],{1122:function(e,a,n){"use strict";n.r(a);var t=n(652),l=n.n(t),u=n(753),r=n(89),i=n(90),c=n(92),s=n(91),o=n(2),m=n.n(o),b=n(709),d=n(754),f=n(706),v=n(673),g=n.n(v),p=n(855),h=n.n(p),E=n(856),j=n(859),k=n(636),S=n(707),O=n(173),y=n(118),K=n(680),x=n(860),P=n(643),A=n(54),B=[],C=function(e){var a=Object(o.useState)(!1),n=Object(P.a)(a,2),t=n[0],l=n[1],u=Object(o.useState)([]),r=Object(P.a)(u,2),i=r[0],c=r[1],s=Object(o.useState)([]),d=Object(P.a)(s,2),v=d[0],g=d[1],p=Object(o.useState)({valuesubdit:null,jmlbelanja:null,nm_belanja:null,value:null}),h=Object(P.a)(p,2),E=h[0],j=h[1],C=Object(o.useState)([]),I=Object(P.a)(C,2),N=I[0],w=I[1],Z=Object(o.useState)([]),z=Object(P.a)(Z,2),D=z[0],Q=z[1],V=Object(o.useState)(!1),Y=Object(P.a)(V,2),q=Y[0],W=Y[1],F=Object(o.useState)(!1),T=Object(P.a)(F,2),H=T[0],R=T[1],G=Object(o.useState)({});Object(x.a)(G);Object(o.useEffect)((function(){var a,n=D.map((function(e){return e.value})),t=e.daftarbelanja.map((function(e){return e.value}));for(a=0;a<n.length;a++){if(t.includes(n[a])){W(!0);break}W(!1)}console.log("duplicate?",D)}));var J=S.h.filter((function(e){return e.value.substring(0,22)===E.value})).filter((function(e){return"00"===e.value.substring(22,24)})),M=S.h.filter((function(e){var a=e.value;return a.substring(0,22)===E.value&&"00"!==a.substring(22,24)})),X=S.b.filter((function(e){var a=e.value;return J[0]?a.substring(0,24)===J[0].value:"hehe"===a.substring(0,24)})),L=M.concat(X),U=S.a.filter((function(a){return a.value.substring(0,14)===e.statusanggaran})),_=function(e){var a=e.target.name,n=e.target.value;w((function(e){return Object(y.a)(Object(y.a)({},e),{},Object(O.a)({},a,n))}))};return m.a.createElement(m.a.Fragment,null,m.a.createElement(k.f,{onClick:function(){"00"!==e.statusanggaran?l(!t):alert("Pilih Subkomponen Terlebih Dahulu")},className:"mr-1",color:"info",size:"sm"},m.a.createElement("a",null,"Tambah Belanja")),m.a.createElement(k.db,{show:t,onClose:l,size:"lg",closeOnBackdrop:!1},m.a.createElement(k.gb,{closeButton:!0},m.a.createElement(k.hb,null,"Tambah Belanja")),m.a.createElement(k.eb,null,m.a.createElement(k.tb,null,m.a.createElement(k.u,{sm:"12"},m.a.createElement(k.K,null,m.a.createElement(k.Z,{htmlFor:"nm_belanja"},"Nama Belanja"),m.a.createElement(b.a,{value:E.valuesubdit,onChange:function(e){j((function(a){return Object(y.a)(Object(y.a)({},a),{},{valuesubdit:e,nm_belanja:e.label,value:e.value})}))}.bind(void 0),name:"nm_belanja",options:U})),m.a.createElement(k.y,{fields:S.f,items:L,scopedSlots:{action:function(e){return 29===e.value.length?m.a.createElement("td",null,m.a.createElement(k.P,{onChange:_.bind(void 0),name:e.value,type:"number"})):m.a.createElement("td",null,m.a.createElement(k.f,{color:"primary",size:"sm",onClick:function(){!function(e){var a=i.indexOf(e),n=i.slice();-1!==a?n.splice(a,1):n=[].concat(Object(K.a)(i),[e]),c(n)}(e)}},i.includes(e)?"Tutup":"Detail"))},nm_judul:function(e){return m.a.createElement("td",null,e.label)},details:function(e){var a=S.k.filter((function(a){return a.value.substring(0,24)===e.value})).filter((function(e){return"00"===e.value.substring(24,26)})),n=S.k.filter((function(a){var n=a.value;return n.substring(0,24)===e.value&&"00"!==n.substring(24,26)})),t=S.b.filter((function(e){var n=e.value;return a[0]?n.substring(0,26)===a[0].value:"hehe"===n.substring(0,26)})),l=n.concat(t);return m.a.createElement(k.v,{show:i.includes(e)},m.a.createElement(k.k,null,m.a.createElement(k.y,{fields:S.g,items:l,scopedSlots:{nm_subjudul:function(e){return m.a.createElement("td",null,e.label)},action:function(e){return 29===e.value.length?m.a.createElement("td",null,m.a.createElement(k.P,{onChange:_.bind(void 0),name:e.value,type:"number"})):m.a.createElement("td",null,m.a.createElement(k.f,{color:"info",size:"sm",onClick:function(){!function(e){var a=v.indexOf(e),n=v.slice();-1!==a?n.splice(a,1):n=[].concat(Object(K.a)(v),[e]),g(n)}(e)}},v.includes(e)?"Tutup":"Detail"))},details:function(e){var a=S.b.filter((function(a){return a.value.substring(0,26)===e.value}));return m.a.createElement(k.v,{show:v.includes(e)},m.a.createElement(k.y,{fields:S.c,items:a,scopedSlots:{bingungapa:function(e){return m.a.createElement("td",null,e.label)},action:function(e){return m.a.createElement("td",null,m.a.createElement(k.P,{onChange:_.bind(void 0),name:e.value,type:"number"}))}}}))}}})))}}})))),m.a.createElement(k.fb,null,m.a.createElement(k.f,{onClick:function(){(B=Object.entries(N)).unshift(["value","jumlah"]);var e=B.shift(),a=0,n=0,t=null;for(a=0;a<B.length;a++){for(t={},n=0;n<e.length;n++)t.pengirim=A.a.currentUser.displayName,t.nm_belanja=E.nm_belanja,t[e[n]]=B[a][n];D.push(t)}Q(D),R(!0),l(!1)}.bind(void 0),color:"primary"},"Tambah")," ",m.a.createElement(k.f,{color:"secondary",onClick:function(){j({valuesubdit:null,jmlbelanja:"",nm_belanja:null,value:null}),l(!1)}.bind(void 0)},"Cancel"))),m.a.createElement(k.db,{show:H,onClose:function(){return l(!1)},size:"lg",closeOnBackdrop:!0},m.a.createElement(k.gb,null,m.a.createElement("h3",null,"Apakah Anda Yakin ?")),m.a.createElement(k.eb,null,m.a.createElement(k.y,{fields:S.e,items:D,scopedSlots:{nm_detil:function(e){var a=S.b.findIndex((function(a){return a.value==e.value})),n=S.b[a];return m.a.createElement("td",null,n.label)},jmldetil:function(e){return m.a.createElement("td",null,m.a.createElement(f.a,{value:e.jumlah,displayType:"text",thousandSeparator:!0,prefix:"Rp"}))}}})),m.a.createElement(k.fb,null,m.a.createElement(k.f,{onClick:function(){!1===q?(e.calleback(D),l(!1),j({valuesubdit:null,jmlbelanja:"",nm_belanja:null,value:null}),Q([]),w([]),B=[],console.log("darimodaldepan",D),R(!1)):(alert("Jenis Detil yang Sama Sudah Ada"),R(!1),l(!0),Q([]),w([]),B=[],j({valuesubdit:null,jmlbelanja:"",nm_belanja:null,value:null}))}.bind(void 0),color:"primary"},"Tambah"))))},I=(n(649),new d.GoogleSpreadsheet("15XAj7IQL6e6t_eRgRcIM8h184gxPXl-dlw0piwuqaPw")),N={subdit:"Ini Subdit",komponen:"Ini Komponen",subkomponen:"Ini Subkomponen",nm_belanja:"Ini Nama Belanja"};function w(e){return e.bingung?m.a.createElement("div",{class:"d-flex justify-content-center align-items-center ",style:{height:"100px"}},m.a.createElement(E.PointSpreadLoading,null)):m.a.createElement("div",null,m.a.createElement(k.tb,null,m.a.createElement(k.u,{sm:"12",className:"d-flex justify-content-center pb-3"},m.a.createElement(j.a,null))),m.a.createElement(k.tb,null,m.a.createElement(k.u,{sm:"12",className:"d-flex justify-content-center"},m.a.createElement(k.f,{color:"success"},m.a.createElement(k.ab,{href:e.message,target:"_blank",class:"stretched-link"}),"Konfirmasi Via Whatsapp"))))}var Z=function(e){Object(c.a)(n,e);var a=Object(s.a)(n);function n(e){var t;return Object(r.a)(this,n),(t=a.call(this,e)).handleReactSelect=function(e,a){var n=a.name;"subdit"==n?t.setState({valuesubdit:e,labelsubdit:e.label,subdit:e.value,valuekomponen:null,valuesubkomponen:null,valueanggaran:null,komponen:"00",subkomponen:"00",daftarbelanja:[]}):"komponen"==n?t.setState({valuekomponen:e,komponen:e.value,valuesubkomponen:null,valueanggaran:null,subkomponen:"00",daftarbelanja:[]}):"subkomponen"==n?t.setState({valuesubkomponen:e,subkomponen:e.value,valueanggaran:null,daftarbelanja:[]}):"anggaran"==n&&t.setState({valueanggaran:e,anggaran:e.value})},t.setBelanja=function(e){if(e){var a=t.state.daftarbelanja.concat(e);t.setState({daftarbelanja:a})}},t.kirimSpreadsheet=function(){var e=Object(u.a)(l.a.mark((function e(a){var n,u,r,i,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.setState({disabled:!0}),t.setState({bingung:!0}),t.setState({modal:!0}),n=t.state.daftarbelanja,u=h()(),t.setState({id:u}),r=0;r<n.length;r++)n[r].timestamp=g()().format("DD/MM/YYYY HH:mm:ss"),n[r].uuid=u;return t.setState({daftarbelanja:n}),e.prev=8,e.next=11,I.useServiceAccountAuth({client_email:"danaku@aktualisasiadik.iam.gserviceaccount.com",private_key:"-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDmNEOXBbEC1AkB\nzSRcWzWbOgoEOMGBBlGs//+iJZ1H+IIeKaVTmENiF3dfsxf5Y6WZJzQ98t0p8w+L\norWbUACiRnT883EU0Mj2sSNuMer/S3zdKO1VJ6/I39B1PNr8Q6/JOv/brY8MVNZ4\nYJJns8nN6QrZuiPqaAInPtIwbErNx68UKVBHPtGx60XPwfgYZcxKa5FhloQEEsnl\n1Q06ADX5wZH4P010g/wKrxFP7hxOpa+uvpE1D6m3PAKn06z3ovtSGYtJZLcmBlYz\nI1QpbtjXPAVulP7K24k24SuzMKUtUY6NXoAZeHKlomB3tO5RQ1e4kc9SNBWhPcls\nDDN37uxdAgMBAAECggEADbWpHNJi81crXicYdkOcUq1HMW8r3wJAVPw9/isdTc73\n+NHkHbFgufPJ0TI6SEjt8MwL6XCQSVJHZ7p99Ez0bLWje/kHkATLIx3zjTl91Exr\nmEQ6tiqR5nWl1YWVSRbC3kocOLoCXeqjhzHBJlnnt9KcKdFTGD+veSTdobKhVdXk\npWpNMyMbAptEiuUW3G9GCZ9gevR/xFER7qZyXkK7x26F8MEMidKypwoJJaJf1nB8\nYfejw9kfPGRtQq1Ip5lM+hQaL07vCFphbCzPp0g0rVYsdZ4THIXWrZyTLo+HLq9w\np8ql6l0Z+XUkY4QEf5Na/7DcaOfpiwl2RhI11VjvBQKBgQD2FawQPjVIlYfiGe9q\n3ueBEYHvIDGSDZqiBSmbantzKohKlvDb7ng0dYzHrQSRgBGwRWMEsiGlry0lpE9q\n3PzyKL7czyyitGg+6f8byGIFds2Hn01eby1Us3g1w6CM8VK5kgKNK0fC3rn8NK/O\nySrYV0k6/Ineo9pBQ9ujeYcC7wKBgQDvesltETdO4qZ6lzc/yxh3Xx/voWuWiqYv\nHGXaDaBOcOJ6ZDFu6IwsvY7kttFO71ookpzUPEvOBEajWlKmZlfQZpxSCIr2xy+m\nsiL8OfekgmrU7XtlJ/+XADZWm36qGALPhc0L2qSg6rZr9VWJSlGnpktDFUynN/X5\nqMfzp6UVcwKBgQC1YVn2ivOZMWX7mGQooG2Aa5ga2d7PqSlNvIJjZEPjqfjVCZY0\ndPuypuYCExvn5r6i7zHBt04noguj0A0dVg82qiOr+yQKNPEVVkHLh5IANwXcreVH\n8qg14yZ6clu3JvRzhRROWxVEpAfvxiHDR/FFjmiSiqtQJ/Np4YtVXfDOjwKBgF/Z\n3ns4E9IQJ6ATnDp9WKqWuVqZWk2j6wYaMK4JHCupRQzFw39ntotFx8bFYZtdc9Gf\ndQQBqjmoPnmtcj1F40n3eAPhhXVmnizzSct4jCUdShM1hlkjnEpc/GLH0/fSqnVT\nUZG4DoKVzzQAux67T1lx1tff05FudZZatsVQSWP/AoGBALOoTh7dt1bgaP8yev0A\nzoRd/10t55QG5LkZrb+OhVC1kWBvaP7eU7yTMKIjWo5fzHgvCN6dD00dd7qfCNPS\nhyqLXsWuSsaXhaGETdHhlRT7AKInhZ/dWbMl2qybmNZrTy9euNcpgekUXIhvrzxz\nJhvbqZv8YnjxNdKKNcNWM6J3\n-----END PRIVATE KEY-----\n"});case 11:return e.next=13,I.loadInfo();case 13:return i=I.sheetsById[252981371],e.next=16,i.addRows(t.state.daftarbelanja);case 16:e.sent,c="https://web.whatsapp.com/send?phone=6289530942027&text=Halo!%0aSaya%20Sudah%20Mengirimkan%20Pengajuan%20Dengan%20Nomor%20Pengajuan:%0a",s=t.state.id,c=c.concat(s),t.setState({message:c}),console.log("bingungaku",t.state.message),t.setState({bingung:!1}),t.setState({disabled:!1,valuesubdit:null,valuekomponen:null,valuesubkomponen:null,valueanggaran:null,komponen:"00",subkomponen:"00",daftarbelanja:[]}),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(8),console.error("Iki Error e ",e.t0);case 29:case"end":return e.stop()}}),e,null,[[8,26]])})));return function(a){return e.apply(this,arguments)}}(),t.state={subdit:"00",labelsubdit:null,komponen:"00",subkomponen:"00",anggaran:null,valuesubdit:null,valuekomponen:null,valuesubkomponen:null,valueanggaran:null,daftarbelanja:[],bingungapa:[],disabled:!1,bingung:!1,modal:!1,message:null,id:null},t}return Object(i.a)(n,[{key:"render",value:function(){var e=this,a=S.i.filter((function(a){return a.value.substring(0,10)==e.state.subdit})),n=S.l.filter((function(a){return a.value.substring(0,12)==e.state.komponen}));return console.log(this.state.daftarbelanja),console.log(this.state.bingung),m.a.createElement(m.a.Fragment,null,m.a.createElement(k.db,{show:this.state.modal,onClose:function(){return e.setState({modal:!1})},size:"lg"},m.a.createElement(k.eb,null,m.a.createElement(w,{bingung:this.state.bingung,message:this.state.message}))),m.a.createElement(k.j,null,m.a.createElement(k.n,{className:"bg-light text-dark"},m.a.createElement("h5",null,"Form Pengajuan Danaku")),m.a.createElement(k.k,null,m.a.createElement(k.K,null,m.a.createElement(k.Z,{htmlFor:"street"},m.a.createElement("h5",null,"Subdirektorat")),m.a.createElement(b.a,{value:this.state.valuesubdit,name:"subdit",onChange:this.handleReactSelect.bind(this),options:S.j,placeholder:"Pilih Subdirektorat"})),m.a.createElement(k.K,null,m.a.createElement(k.Z,{htmlFor:"street"},m.a.createElement("h5",null,"Komponen")),m.a.createElement(b.a,{value:this.state.valuekomponen,name:"komponen",onChange:this.handleReactSelect.bind(this),options:a,placeholder:"Pilih Komponen"})),m.a.createElement(k.K,null,m.a.createElement(k.Z,{htmlFor:"street"},m.a.createElement("h5",null,"Subkomponen")),m.a.createElement(b.a,{value:this.state.valuesubkomponen,name:"subkomponen",onChange:this.handleReactSelect.bind(this),options:n,placeholder:"Pilih Subkomponen"})),m.a.createElement(k.K,null,m.a.createElement(k.Z,{htmlFor:"street"},m.a.createElement("h5",null,"Daftar Belanja")),m.a.createElement("div",{className:"pb-2 d-flex justify-content-end"},m.a.createElement(C,{daftarbelanja:this.state.daftarbelanja,statusanggaran:this.state.subkomponen,calleback:this.setBelanja})),m.a.createElement(k.y,{fields:S.d,items:this.state.daftarbelanja,itemsPerPage:5,hover:!0,size:"sm",sorter:!0,pagination:!0,scopedSlots:{nm_detil:function(e){var a=S.b.findIndex((function(a){return a.value==e.value})),n=S.b[a];return m.a.createElement("td",null,n.label)},jmldetil:function(e){return m.a.createElement("td",null,m.a.createElement(f.a,{value:e.jumlah,displayType:"text",thousandSeparator:!0,prefix:"Rp"}))},action:function(a){var n=e.state.daftarbelanja.findIndex((function(e){return e.value==a.value}));return m.a.createElement("td",null,m.a.createElement(k.f,{onClick:function(){var a=e.state.daftarbelanja;a.splice(n,1),e.setState({daftarbelanja:a})},size:"sm",color:"danger"},"Hapus"))}}}))),m.a.createElement(k.l,null,m.a.createElement("div",{className:"d-flex justify-content-end"},m.a.createElement(k.f,{onClick:function(){return e.kirimSpreadsheet(N)},color:"primary",disabled:this.state.disabled},"Kirim")," "))))}}]),n}(o.Component);a.default=Z}}]);
//# sourceMappingURL=45.9f61ddc5.chunk.js.map